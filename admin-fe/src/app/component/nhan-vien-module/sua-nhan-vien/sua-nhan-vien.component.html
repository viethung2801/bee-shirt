<app-main-heading
  [icon]="icon"
  [mainHeading]="mainHeading"
  [title]="title"
></app-main-heading>

<!-- Form start -->
<div class="row gutters mt-3">
  <div class="col-sm-12">
    <form class="card">
      <div class="card-header">
        <h4 class="float-md-left">Sửa nhân viên</h4>
      </div>
      <div class="card-body">
        <form [formGroup]="updateForm">
          <div class="row justify-content-center">
            <div class="col-md-4">
              <div class="d-flex justify-content-center">
                <input
                  type="file"
                  (change)="onFileSelected($event)"
                  (change)="imageChange($event)"
                  #fileInput
                  style="display: none"
                />
                <button (click)="openFileInput()" class="button-anh">
                  <img
                    *ngIf="!imageNew"
                    [src]="nhanVienUpdated?.imageUrl"
                    alt=""
                  />
                  <span *ngIf="!imageNew"
                    ><i class="fa-solid fa-plus fa-xl" style="color: red"></i
                  ></span>
                  <img *ngIf="imageNew" [src]="imageNew" alt="Selected Image" />
                </button>
              </div>
              <div class="form-group">
                <label class="input_label">
                  <b class="b-red-required">*</b>Họ tên</label
                >
                <input
                  type="text"
                  class="form-control input"
                  placeholder="Họ tên"
                  [ngClass]="
                    updateForm.get('hoTen').invalid &&
                    updateForm.get('hoTen').touched
                      ? 'is-invalid'
                      : ''
                  "
                  formControlName="hoTen"
                />
                <div class="invalid-feedback">Họ tên không hợp lệ</div>
              </div>
            </div>
            <div class="col-md-7">
              <div class="row">
                <div class="col">
                  <div class="form-group">
                    <label class="input_label">
                      <b class="b-red-required">*</b>CCCD</label
                    >
                    <input
                      type="text"
                      class="form-control input"
                      placeholder="CCCD"
                      [ngClass]="
                        updateForm.get('cccd').invalid &&
                        updateForm.get('cccd').touched
                          ? 'is-invalid'
                          : ''
                      "
                      formControlName="cccd"
                    />
                    <div class="invalid-feedback">CCCD không hợp lệ</div>
                  </div>
                </div>

                <div class="col">
                  <div class="form-group">
                    <label class="input_label">
                      <b class="b-red-required">*</b>Ngày sinh</label
                    >
                    <input
                      type="date"
                      class="form-control input"
                      placeholder="Ngày sinh"
                      [ngClass]="
                        updateForm.get('ngaySinh').invalid &&
                        updateForm.get('ngaySinh').touched
                          ? 'is-invalid'
                          : ''
                      "
                      formControlName="ngaySinh"
                    />
                    <div class="invalid-feedback">Không được bỏ trống</div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div class="form-group">
                    <label class="input_label">
                      <b class="b-red-required">*</b>Địa chỉ</label
                    >
                    <input
                      type="text"
                      class="form-control input"
                      placeholder="Địa chỉ"
                      [ngClass]="
                        updateForm.get('diaChi').invalid &&
                        updateForm.get('diaChi').touched
                          ? 'is-invalid'
                          : ''
                      "
                      formControlName="diaChi"
                    />
                    <div class="invalid-feedback">Không được bỏ trống</div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group">
                    <label class="form-label input_label">
                      <b class="b-red-required">*</b>Giới tính
                    </label>
                    <br />

                    <div class="form-check form-check-inline ms-1">
                      <input
                        class="form-check-input"
                        type="radio"
                        [value]="true"
                        formControlName="gioiTinh"
                      />
                      <label class="form-check-label me-3"> Nam </label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="radio"
                        [value]="false"
                        formControlName="gioiTinh"
                      />
                      <label class="form-check-label"> Nữ </label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div class="form-group">
                    <label class="input_label">
                      <b class="b-red-required">*</b>Số điện thoại</label
                    >
                    <input
                      type="text"
                      class="form-control input"
                      placeholder="Số điện thoại"
                      [ngClass]="
                        updateForm.get('sdt').invalid &&
                        updateForm.get('sdt').touched
                          ? 'is-invalid'
                          : ''
                      "
                      formControlName="sdt"
                    />
                    <div class="invalid-feedback">SĐT không hợp lệ</div>
                  </div>
                </div>
                <div class="col">
                  <div class="form-group">
                    <label class="input_label">
                      <b class="b-red-required">*</b>Email
                    </label>
                    <input
                      type="email"
                      class="form-control input"
                      placeholder="Email"
                      [ngClass]="
                        updateForm.get('email').invalid &&
                        updateForm.get('email').touched
                          ? 'is-invalid'
                          : ''
                      "
                      [value]="updateForm.get('email').value"
                      [disabled]="true"
                    />
                    <div class="invalid-feedback">Email không hợp lệ</div>
                  </div>
                </div>
              </div>
              <!-- Chức vụ -->
              <div class="row">
                <div class="col">
                  <div class="form-group">
                    <label class="form-label input_label">
                      <b class="b-red-required">*</b>Chức vụ
                    </label>
                    <br />

                    <div class="form-check form-check-inline ms-1">
                      <input
                        class="form-check-input"
                        type="radio"
                        value="ROLE_STAFF"
                        formControlName="role"
                      />
                      <label class="form-check-label me-3"> Nhân viên </label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="radio"
                        value="ROLE_ADMIN"
                        formControlName="role"
                      />
                      <label class="form-check-label"> Quản lý </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="text-right">
            <button
              type="submit"
              class="btn btn-outline-warning btn-rounded mx-2"
              [disabled]="updateForm.invalid"
              (click)="updateNhanVien()"
            >
              <i class="fa-solid fa-pen-to-square" id="icon-button-update"></i>
              Sửa
            </button>
            <button
              type="button"
              class="btn btn-secondary btn-rounded"
              routerLink="/nhan-vien/ds-nhan-vien"
            >
              Back
            </button>
          </div>
        </form>
      </div>
    </form>
  </div>
</div>
<!-- Form ends -->
